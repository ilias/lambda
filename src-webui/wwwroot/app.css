/* Monaco editor container */
.monaco-host { display:block; }
.monaco-host.hidden { display:none; }
.monaco-editor { height:260px; border:1px solid var(--line); }
/* -------------------------------------------------------------------------- */
/* Design System Tokens                                                       */
/* -------------------------------------------------------------------------- */
/* Core (semantic) colors */
:root {
	/* NEW semantic tokens */
	--color-bg: #0d1117;
	--color-surface-1: #161b22;
	--color-surface-2: #1f2630;
	--color-border: #30363d;
	--color-border-muted: #262c33;
	--color-accent: #58a6ff;
	--color-accent-hover: #4094f6;
	--color-fg: #c9d1d9;
	--color-fg-subtle: #8b949e;
	--color-good: #3fb950;
	--color-bad: #ff6b6b;
	--color-warn: #e3b341;
	--color-destructive: #ff4d4d;
	--color-destructive-hover: #ff3030;

	/* Spacing scale */
	--space-0: 0;
	--space-1: .25rem; /* 4 */
	--space-2: .5rem;  /* 8 */
	--space-3: .75rem; /* 12 */
	--space-4: 1rem;   /* 16 */
	--space-5: 1.25rem;/* 20 */
	--space-6: 1.5rem; /* 24 */
	--space-7: 2rem;   /* 32 */

	/* Typography */
	--font-stack-sans: system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
	--font-stack-mono: ui-monospace,Consolas,monospace;
	--font-size-xs: .55rem;
	--font-size-sm: .65rem;
	--font-size-base: .8rem;
	--font-size-md: .85rem;
	--font-size-lg: 1rem;
	--font-size-xl: 1.25rem;
	--line-height-tight: 1.15;
	--line-height-base: 1.35;

	/* UI sizes (modifiable by settings) */
	--editor-font-size: .95rem;
	--output-font-size: .85rem;

	/* Radius */
	--radius-sm:4px; --radius:6px; --radius-md:8px; --radius-lg:12px; --radius-pill:999px;

	/* Elevation (shadows) */
	--elevation-1: 0 1px 2px rgba(0,0,0,.18), 0 0 0 1px var(--color-border);
	--elevation-2: 0 2px 4px rgba(0,0,0,.25), 0 0 0 1px var(--color-border);
	--elevation-3: 0 4px 12px rgba(0,0,0,.35), 0 0 0 1px var(--color-border);

	/* Motion / timing */
	--ease: cubic-bezier(.4,.2,.2,1);
	--transition-fast: 120ms var(--ease);
	--transition: 220ms var(--ease);

	/* Backwards compatibility (legacy variable names) */
	--bg: var(--color-bg);
	--panel: var(--color-surface-1);
	--border: var(--color-border);
	--accent: var(--color-accent);
	--text: var(--color-fg);
	--bad: var(--color-bad);
	--good: var(--color-good);
}
/* Dark (default matches :root) */
body[data-theme='dark'] {
	--color-bg:#0d1117;
	--color-surface-1:#161b22;
	--color-surface-2:#1f2630;
	--color-border:#30363d;
	--color-border-muted:#262c33;
	--color-accent:#58a6ff;
	--color-accent-hover:#4094f6;
	--color-fg:#c9d1d9;
	--color-fg-subtle:#8b949e;
	--color-good:#3fb950;
	--color-bad:#ff6b6b;
	--color-warn:#e3b341;
	--color-destructive:#ff4d4d;
	--color-destructive-hover:#ff3030;
}
/* Light theme refinement (slightly softened accent & surfaces for contrast) */
body[data-theme='light'] {
	--color-bg:#f3f6f9; /* slightly warmer than #f6f8fa */
	--color-surface-1:#ffffff;
	--color-surface-2:#f0f3f6;
	--color-border:#d0d7de;
	--color-border-muted:#e2e6ea;
	--color-accent:#0a61c6; /* slightly deeper than #0969da for contrast AA */
	--color-accent-hover:#094fa3;
	--color-fg:#1f2429;
	--color-fg-subtle:#555e66;
	--color-good:#1a7f37;
	--color-bad:#d1242f;
	--color-warn:#b88700;
	--color-destructive:#c62828;
	--color-destructive-hover:#b11717;
}
body[data-theme='colorful'] {
	--color-bg:#1e0028;
	--color-surface-1:#2d0a3f;
	--color-surface-2:#37124d;
	--color-border:#5e2e7e;
	--color-border-muted:#4b2565;
	--color-accent:#ff8a3d;
	--color-accent-hover:#ff7a1f;
	--color-fg:#f6ecff;
	--color-fg-subtle:#c9b6d6;
	--color-good:#5af29d;
	--color-bad:#ff4d6d;
	--color-warn:#ffc15a;
	--color-destructive:#ff4d6d;
	--color-destructive-hover:#ff294f;
}
/* Legacy theme-dependent backgrounds */
body[data-theme='light'] .output-pane, body[data-theme='light'] textarea, body[data-theme='light'] input[type=text] { background:#ffffff; }
body[data-theme='colorful'] .output-pane, body[data-theme='colorful'] textarea, body[data-theme='colorful'] input[type=text] { background:#330f49; }
body[data-theme='light'] .output-pane, body[data-theme='light'] textarea, body[data-theme='light'] input[type=text] { background:#ffffff; }
body[data-theme='colorful'] .output-pane, body[data-theme='colorful'] textarea, body[data-theme='colorful'] input[type=text] { background:#330f49; }
body[data-theme] { transition:background-color .25s ease, color .25s ease; }
body { font-family: var(--font-stack-sans); background:var(--color-bg); color:var(--color-fg); margin:0; font-size:var(--font-size-base); line-height:var(--line-height-base); }
/* Auto theme ties to system if user selects it (handled in JS by setting data-theme=auto) */
@media (prefers-color-scheme: light){
	body[data-theme='auto']{ --color-bg:#f3f6f9; --color-surface-1:#ffffff; --color-surface-2:#f0f3f6; --color-border:#d0d7de; --color-border-muted:#e2e6ea; --color-accent:#0a61c6; --color-accent-hover:#094fa3; --color-fg:#1f2429; --color-fg-subtle:#555e66; --color-good:#1a7f37; --color-bad:#d1242f; --color-warn:#b88700; --color-destructive:#c62828; --color-destructive-hover:#b11717; }
}
@media (prefers-color-scheme: dark){
	body[data-theme='auto']{ --color-bg:#0d1117; --color-surface-1:#161b22; --color-surface-2:#1f2630; --color-border:#30363d; --color-border-muted:#262c33; --color-accent:#58a6ff; --color-accent-hover:#4094f6; --color-fg:#c9d1d9; --color-fg-subtle:#8b949e; --color-good:#3fb950; --color-bad:#ff6b6b; --color-warn:#e3b341; --color-destructive:#ff4d4d; --color-destructive-hover:#ff3030; }
}
/* Layout grid & sections (moved from inline) */
main { max-width:1400px; margin:0 auto; padding:1.25rem; display:grid; gap:1rem; grid-template-columns: 1fr 1fr; }
section { background:var(--color-surface-1); border:1px solid var(--color-border); border-radius:var(--radius-md); padding:var(--space-4) var(--space-5); display:flex; flex-direction:column; box-shadow:var(--elevation-1); transition:background-color var(--transition), box-shadow var(--transition); }
section:hover { box-shadow:var(--elevation-2); }
.full-span { grid-column:1 / -1; }
#output { width:100%; max-width:100%; box-sizing:border-box; white-space:pre-wrap; word-break:break-word; overflow-wrap:anywhere; }
#outputTabs, #inputTabs { display:flex; gap:.35rem; margin:.4rem 0 .5rem; align-items:stretch; flex-wrap:wrap; }
#outputTabs.inline-tabs { margin:0 .75rem 0 .75rem; }
#outputTabs .tab, #inputTabs .tab { position:relative; padding:.35rem .65rem; background:var(--color-surface-2); border:1px solid var(--color-border); border-radius:var(--radius-sm); cursor:pointer; font-size:var(--font-size-sm); font-weight:600; letter-spacing:.05em; -webkit-user-select:none; user-select:none; display:inline-flex; align-items:center; gap:.4rem; line-height:1; transition:background-color var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast); box-shadow:0 0 0 1px var(--color-border); }
#outputTabs .tab.dragging, #inputTabs .tab.dragging { opacity:.6; }
#outputTabs .tab.drag-over, #inputTabs .tab.drag-over { box-shadow:0 0 0 2px var(--color-accent); }
#inputTabs .tab { cursor:text; }
#outputTabs .tab .close, #inputTabs .tab .close { font-weight:700; font-size:.75rem; line-height:1; cursor:pointer; opacity:.8; }
#outputTabs .tab .close:hover, #inputTabs .tab .close:hover { opacity:1; }
#outputTabs .tab .close::after, #inputTabs .tab .close::after { content:'\00D7'; display:inline-block; padding-left:.35rem; }
#addTabBtn { padding:.35rem .55rem; font-size:.7rem; }
.output-pane { display:none; overflow-y:auto; overflow-x:hidden; opacity:0; transform:translateY(4px); transition:opacity var(--transition), transform var(--transition); }
.output-pane.active { display:block; animation:fadeSlideIn .35s var(--ease); opacity:1; transform:translateY(0); }
@keyframes fadeSlideIn { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }
.cont-hint { font-size:var(--font-size-sm); letter-spacing:.05em; text-transform:uppercase; margin-top:.35rem; color:var(--color-warn); display:none; font-weight:600; }
.cont-hint.active { display:block; }
/* Log color classes */
.log-error{color:var(--color-bad);} .log-comment{color:var(--color-warn);} .log-result{color:var(--color-good);} .log-norm{color:var(--color-good); opacity:.85;} .log-step{color:var(--color-warn);} .log-time{color:var(--color-accent);} .log-name{color:var(--color-accent);} .log-eval{color:#d2a8ff;} .log-macro{color:var(--color-accent);} .log-alpha{color:#d2a8ff;} .log-alpha-pass{color:var(--color-good);} .log-alpha-fail{color:var(--color-bad);} .log-command{color:#ff7b72;} .log-loading{color:#76e3ea;} .log-fileline{color:var(--color-fg-subtle);} .log-fileresult{color:var(--color-good);} .log-progress{color:var(--color-accent); opacity:.7;} .log-processing{color:var(--color-fg-subtle);} .log-print{color:#ffa657;}
.hidden-log { display:none !important; }
@media (max-width: 960px) { main { grid-template-columns:1fr; padding:var(--space-3); } #output { width:100%; } }
@media (max-width:600px){ #searchFloat { right:8px; } }
#scrollBottomBtn, #scrollTopBtn { position:fixed; z-index:1000; padding:.4rem .55rem; font-size:var(--font-size-sm); left:10px; -webkit-backdrop-filter:blur(4px); backdrop-filter:blur(4px); background:rgba(30,30,34,.55); border:1px solid var(--color-border); }
#scrollBottomBtn { top:10px; }
#scrollTopBtn { bottom:10px; }
.max-lines-wrap { display:flex; align-items:center; gap:.35rem; margin-left:.75rem; }
.max-lines-wrap label { font-size:.55rem; letter-spacing:.08em; font-weight:600; text-transform:uppercase; }
#maxLinesInput { width:5.2rem; padding:.15rem .3rem; font-size:.7rem; }

/* Search highlight (moved from JS injection) */
.search-hit { background:rgba(88,166,255,.22); border-radius:3px; transition:background .15s ease; }
.search-current { background:var(--accent) !important; color:#fff !important; outline:2px solid var(--accent); outline-offset:0; }
body[data-theme='colorful'] .search-hit { background:rgba(255,138,61,.28); }
body[data-theme='colorful'] .search-current { background:var(--accent) !important; color:#fff !important; box-shadow:0 0 0 2px rgba(255,138,61,.55); }
body[data-theme='dark'] .search-hit { background:rgba(88,166,255,.28); }
body[data-theme='dark'] .search-current { box-shadow:0 0 0 2px rgba(88,166,255,.5); }
body[data-theme='light'] .search-hit { background:#ffe8a3; }
body[data-theme='light'] .search-current { outline:2px solid var(--accent); background:var(--accent); color:#fff !important; }

/* Inline eval spinner */
.inline-spinner { width:12px; height:12px; border:2px solid var(--color-border); border-top-color:var(--color-accent); border-radius:50%; animation:spin .65s linear infinite; display:inline-block; vertical-align:middle; margin-right:.4rem; }
@keyframes spin { to { transform:rotate(360deg); } }

/* Test summary panel */

/* Search toggles */
.search-toggle { font-size:.45rem; letter-spacing:.08em; text-transform:uppercase; display:inline-flex; gap:.25rem; align-items:center; opacity:.75; cursor:pointer; }
.search-toggle input { margin:0; }
.search-toggle:hover { opacity:1; }

/* Filtered-out (search Only mode) visual dim (still hidden via JS if needed) */
.search-filter-hidden { display:none !important; }

/* Layout */
.site-header { padding:var(--space-5) var(--space-6); background:var(--color-surface-1); border-bottom:1px solid var(--color-border); display:flex; align-items:center; justify-content:space-between; gap:var(--space-4); flex-wrap:wrap; box-shadow:var(--elevation-1); }
.site-title { margin:0; font-size:var(--font-size-xl); font-weight:600; letter-spacing:.02em; }
.site-nav { display:flex; align-items:center; gap:var(--space-3); font-size:var(--font-size-sm); flex-wrap:wrap; }
.site-nav a, .site-nav button { color:var(--color-accent); text-decoration:none; font-weight:600; transition:color var(--transition-fast); }
.site-nav a:hover, .site-nav button:hover { color:var(--color-accent-hover); }
.theme-select { background:var(--color-surface-2); color:var(--color-fg); border:1px solid var(--color-border); border-radius:var(--radius-sm); font-size:var(--font-size-sm); padding:.3rem .5rem; transition:background-color var(--transition-fast), border-color var(--transition-fast); }
.theme-select:hover { background:var(--color-surface-1); }
body[data-theme='light'] .theme-select { background:#ffffff; }
body[data-theme='colorful'] .theme-select { background:#2d0a3f; }

/* small right margin utility */
.mr-sm { margin-right: .5rem; }
.link-btn { background:transparent; border:0; cursor:pointer; font:inherit; padding:0; }
.icon { width:1em; height:1em; display:inline-block; vertical-align:middle; }
.icon.tiny { width:.9em; height:.9em; }
button .icon { margin-right:.4em; }
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
/* Ensure icons don't scale strangely and use currentColor */
.icon { fill: none; stroke: currentColor; stroke-width: 2; }
/* Hide sprite container safely across browsers */
.svg-sprite { position: absolute; width: 0; height: 0; overflow: hidden; opacity: 0; pointer-events: none; }
/* Normalize button icon/text alignment */
button { align-items: center; }
button .icon + span { line-height: 1; }
.flex { display:flex; }
.flex-wrap { flex-wrap:wrap; }
.gap-sm { gap:.35rem; }
.gap-md { gap:.75rem; }
.gap-lg { gap:1rem; }
.space-between { justify-content:space-between; }
.items-center { align-items:center; }
.nowrap { white-space:nowrap; }
.hidden { display:none !important; }

/* Buttons (hierarchy) ------------------------------------------------------- */
button { cursor:pointer; font-family:inherit; font-weight:600; letter-spacing:.04em; font-size:var(--font-size-sm); line-height:1.1; border-radius:var(--radius-sm); border:1px solid transparent; padding:.45rem .75rem; position:relative; display:inline-flex; gap:.45rem; align-items:center; justify-content:center; transition:background-color var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast), transform var(--transition-fast); }
button:focus-visible { outline:2px solid var(--color-accent); outline-offset:2px; }
button:active:not(:disabled) { transform:translateY(1px); }
button.primary, button:not(.secondary):not(.subtle):not(.destructive) { background:var(--color-accent); color:#fff; border-color:var(--color-accent); box-shadow:0 1px 2px rgba(0,0,0,.25); }
button.primary:hover, button:not(.secondary):not(.subtle):not(.destructive):hover { background:var(--color-accent-hover); border-color:var(--color-accent-hover); }
/* Subtle / secondary */
button.secondary, button.subtle { background:var(--color-surface-2); color:var(--color-accent); border-color:var(--color-border); }
button.secondary:hover, button.subtle:hover { background:var(--color-surface-1); color:var(--color-accent-hover); }
/* Ghost style (text only) */
button.ghost { background:transparent; border-color:transparent; color:var(--color-accent); }
button.ghost:hover { background:var(--color-surface-2); color:var(--color-accent-hover); }
/* Destructive */
button.destructive { background:var(--color-destructive); border-color:var(--color-destructive); color:#fff; }
button.destructive:hover { background:var(--color-destructive-hover); border-color:var(--color-destructive-hover); }
/* Disabled */
button:disabled { opacity:.55; cursor:default; box-shadow:none; }
/* Tiny / size variants */
button.tiny { font-size:var(--font-size-xs); padding:.25rem .45rem; }

/* Forms */
textarea, input[type=text] { background:#0f141a; color:var(--color-fg); border:1px solid var(--color-border); border-radius:var(--radius); padding:.6rem .7rem; font-family:var(--font-stack-mono); font-size:.95rem; resize:vertical; transition:border-color var(--transition-fast), background-color var(--transition-fast); }
textarea:focus, input:focus { outline:2px solid var(--color-accent); outline-offset:1px; }
#filePath { font-size:.7rem; }
#searchInput { font-size:.7rem; padding: .2rem .3rem; }
label { font-size:.75rem; font-weight:600; text-transform:uppercase; letter-spacing:.06em; margin-bottom:.25rem; opacity:.85; }
.status { font-size:.75rem; letter-spacing:.05em; text-transform:uppercase; font-weight:600; }
.small { font-size:.7rem; opacity:.7; }

/* Help page */
.help-header { background:var(--panel); padding:1rem 1.5rem; border-bottom:1px solid var(--border); }
.help-main { max-width:1200px; margin:0 auto; padding:1.25rem 1.4rem 3rem; }
.badge { display:inline-block; background:#1f2630; border:1px solid var(--border); padding:.15rem .45rem; border-radius:4px; font-size:.6rem; letter-spacing:.05em; text-transform:uppercase; }
.search-box { position:sticky; top:0; background:linear-gradient(var(--panel),rgba(13,17,23,0.85)); padding:.75rem 0 1rem; -webkit-backdrop-filter:blur(4px); backdrop-filter:blur(4px); z-index:10; }
#filter { width:260px; max-width:100%; background:#0f141a; color:var(--text); border:1px solid var(--border); border-radius:6px; padding:.55rem .65rem; font-size:.75rem; }
.toc { font-size:.7rem; display:flex; flex-wrap:wrap; gap:.5rem 1.1rem; line-height:1.3; }
.section { scroll-margin-top:72px; }
.section h2 { margin:2.4rem 0 .75rem; font-size:1.05rem; letter-spacing:.05em; text-transform:uppercase; display:flex; gap:.5rem; align-items:center; }
.section h2 .anchor-link { opacity:0; transition:opacity .2s; font-size:.75rem; }
.section:hover h2 .anchor-link, .section h2:focus-within .anchor-link { opacity:1; }
pre, code { font-family:ui-monospace,Consolas,monospace; font-size:.85rem; }
pre { background:#0f141a; border:1px solid var(--color-border); padding:.85rem 1rem; border-radius:var(--radius); overflow:auto; }
.copy { cursor:pointer; }
.table-wrap { overflow:auto; }
.table-wrap table { border-collapse:collapse; font-size:.7rem; width:100%; }
.table-wrap th, .table-wrap td { border:1px solid var(--border); padding:.4rem .5rem; text-align:left; vertical-align:top; }
blockquote { margin:1rem 0; border-left:3px solid var(--accent); padding:.4rem .75rem; background:#121820; }
footer { text-align:center; font-size:.65rem; opacity:.7; margin:3rem 0 0; }
.anchor-copy-flash { outline:1px solid var(--accent); }

/* Tabs & panes (original UI reused) */
.output-pane { background:#0f141a; border:1px solid var(--color-border); border-radius:var(--radius); padding:.75rem; width:100%; box-sizing:border-box; white-space:pre-wrap; word-break:break-word; overflow-wrap:anywhere; line-height:1.3; font-size:.85rem; box-shadow:inset 0 0 0 1px var(--color-border-muted); }
.output-pane { white-space: pre; overflow-x: auto; }
body.wrap-output .output-pane { white-space: pre-wrap; overflow-x: hidden; word-break: break-word; overflow-wrap: anywhere; }

/* Line numbers (CSP-safe, no inline styles) */
body.line-numbers .output-pane { counter-reset: logline; position: relative; padding-left: 3.25rem; }
/* Only number top-level log lines */
body.line-numbers .output-pane .log-line { position: relative; display: block; padding-left: 0; }
body.line-numbers .output-pane .log-line::before {
	counter-increment: logline;
	content: counter(logline);
	position: absolute;
	left: -2.8rem;
	width: 2.5rem;
	text-align: right;
	color: var(--color-fg-subtle);
	opacity: .75;
}
/* Keep hidden items from consuming line numbers when filtered */
body.line-numbers .output-pane .log-line.hidden-log::before,
body.line-numbers .output-pane .log-line.search-filter-hidden::before { content: ''; counter-increment: none; }

/* Utility */
.mt-0 { margin-top:0; }
.mb-0 { margin-bottom:0; }
.m-0 { margin:0; }

/* Safari fallback note: backdrop-filter already prefixed above */

/* ---- Added classes for refactored inline styles (index.html) ---- */
.bar { display:flex; align-items:center; flex-wrap:wrap; gap:var(--space-3); }
.bar-space { justify-content:space-between; }
.flex-tabs { display:flex; gap:.35rem; flex-wrap:wrap; align-items:stretch; }
.expr-area { height:130px; display:none; }
.m0, .mt0 { margin-top:0; }
.mt-sm { margin-top:.5rem; }
.rule { margin:1rem 0; border:0; border-top:1px solid var(--border); }
.examples-list { margin:.25rem 0 0 1.1rem; padding:0; font-size:.8rem; line-height:1.4; }
.examples-list .example { cursor:pointer; color:var(--color-accent); }
.examples-list .example:hover { text-decoration:underline; }

/* Toasts */
.toast-host { position:fixed; z-index:1100; right:12px; bottom:14px; display:flex; flex-direction:column; gap:.5rem; }
.toast { background:var(--color-surface-1); border:1px solid var(--color-border); padding:.5rem .65rem; border-radius:var(--radius); box-shadow:var(--elevation-2); font-size:.8rem; animation:toastIn .22s var(--ease); }
@keyframes toastIn { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }
.toast.good { border-color: var(--color-good); }
.toast.warn { border-color: #e3b341; }
.toast.bad { border-color: var(--color-bad); }

/* Modal (help overlay) */
.modal { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,.45); z-index:1200; }
.modal.hidden { display:none; }
.modal .modal-content { background:var(--color-surface-1); color:var(--color-fg); border:1px solid var(--color-border); border-radius:var(--radius-md); width:min(520px, 92vw); box-shadow:var(--elevation-3); }
.modal .modal-header { display:flex; align-items:center; justify-content:space-between; padding:.6rem .8rem; border-bottom:1px solid var(--color-border); }
.modal .modal-body { padding:.8rem; }
.kblist { margin:.25rem 0; padding-left:1.1rem; font-size:.9rem; line-height:1.6; }
.bar-results { display:flex; flex-wrap:wrap; gap:.75rem; align-items:flex-end; justify-content:space-between; }
.full-span .bar-results { position: sticky; top: 0; z-index: 4; background: var(--color-surface-1); border-bottom: 1px solid var(--color-border); padding-top:.5rem; padding-bottom:.5rem; }
.label-small { font-size:.75rem; font-weight:600; text-transform:uppercase; letter-spacing:.06em; opacity:.85; }
.ti-good { color: var(--color-good); }
.ti-warn { color: #e3b341; }
.search-box.inline { position:static; background:transparent; padding:0; }
.search-input { width:140px; font-size:.65rem; padding:.4rem .5rem; }
button.tiny { font-size:.6rem; padding:.3rem .5rem; }
.progress { margin-top:.4rem; height:6px; background:#222; border:1px solid var(--border); border-radius:4px; overflow:hidden; display:none; }
.progress-bar { height:100%; width:0; background:var(--accent); transition:width .25s; }
.anchor-highlight { outline:1px solid var(--accent); }
/* Inline output tabs alignment */
.bar-results { align-items:flex-start; }
.label-small.mt-aligned { margin-top:.4rem; }
.push-right { margin-left:auto; }
#testIndicator { margin-left:.75rem; font-weight:600; letter-spacing:.05em; }
/* Input panes */
.input-pane { height:130px; width:100%; margin-top:.5rem; margin-bottom:.4rem; display:none; background:#0f141a; color:var(--text); border:1px solid var(--border); border-radius:6px; padding:.4rem .3rem; font-family:ui-monospace,Consolas,monospace; font-size:.95rem; resize:vertical; }
.input-pane.active { display:block; }
/* README pre */
.readme-md { max-height:600px; overflow:auto; font-size:.7rem; background:#0f141a; border:1px solid var(--border); padding:.85rem 1rem; border-radius:6px; }

/* Tabs (inactive styles harmonized with themes) */
/* Tab theming + motion */
#outputTabs .tab, #inputTabs .tab { background:var(--color-surface-2); color:var(--color-fg-subtle); }
body[data-theme='light'] #outputTabs .tab, body[data-theme='light'] #inputTabs .tab { background:var(--color-surface-2); color:var(--color-fg-subtle); }
body[data-theme='colorful'] #outputTabs .tab, body[data-theme='colorful'] #inputTabs .tab { background:var(--color-surface-2); }
#outputTabs .tab:not(.active):hover, #inputTabs .tab:not(.active):hover { background:var(--color-surface-1); color:var(--color-fg); }
/* Active */
#outputTabs .tab.active, #inputTabs .tab.active { background:var(--color-accent) !important; color:#fff !important; border-color:var(--color-accent) !important; box-shadow:0 0 0 1px var(--color-accent), 0 4px 10px -2px rgba(0,0,0,.35); }
/* Focus outline for keyboard users */
#outputTabs .tab:focus-visible, #inputTabs .tab:focus-visible { outline:2px solid var(--accent); outline-offset:2px; }

/* Filters (log type toggles) moved from inline styles */
#filters { display:flex; flex-wrap:wrap; gap:.5rem; margin:.4rem 0 .3rem; }
#filters label { font-size:var(--font-size-xs); letter-spacing:.08em; text-transform:uppercase; font-weight:600; display:flex; gap:.25rem; align-items:center; background:var(--color-surface-2); padding:.3rem .5rem; border:1px solid var(--color-border); border-radius:var(--radius-sm); cursor:pointer; transition:background-color var(--transition-fast), color var(--transition-fast); }
#filters label:hover { background:var(--color-surface-1); }
#filters input { margin:0; accent-color:var(--accent); }
body[data-theme='light'] #filters label { background:#ffffff; }
body[data-theme='colorful'] #filters label { background:#2d0a3f; }
body[data-theme='light'] .search-box { background:#ffffff; box-shadow:0 1px 2px rgba(0,0,0,.08); }
body[data-theme='light'] #searchFloat { background:rgba(255, 255, 255, 0.756); border:1px solid #d0d7de; box-shadow:0 2px 6px rgba(140,149,159,.3); }
body[data-theme='light'] .search-hit { background:#ffe8a3 !important; }
body[data-theme='light'] .search-current { outline:2px solid var(--accent) !important; }
#searchFloat { position:fixed; bottom:14px; right:16px; left:auto !important; display:none; gap:.35rem; background:rgba(22,27,34,.92); border:1px solid var(--color-border); padding:.4rem .55rem; border-radius:var(--radius); box-shadow:var(--elevation-2); z-index:999; font-size:var(--font-size-xs); align-items:center; -webkit-backdrop-filter:blur(6px); backdrop-filter:blur(6px); }
@media (max-width:600px){ #searchFloat { right:8px; left:auto !important; } }

/* Settings grid */
.settings-grid { display:grid; grid-template-columns: 140px 1fr; gap:.6rem .8rem; align-items:center; }
.settings-grid label { margin:0; }
.settings-grid input[type=range] { width:100%; }
.switch-row { grid-column:1 / -1; display:flex; align-items:center; gap:.5rem; font-weight:600; }

/* Bind adjustable font sizes via body classes (CSP-safe) */
body.efs-12 .input-pane { font-size:12px; }
body.efs-13 .input-pane { font-size:13px; }
body.efs-14 .input-pane { font-size:14px; }
body.efs-15 .input-pane { font-size:15px; }
body.efs-16 .input-pane { font-size:16px; }
body.efs-17 .input-pane { font-size:17px; }
body.efs-18 .input-pane { font-size:18px; }
body.efs-19 .input-pane { font-size:19px; }
body.efs-20 .input-pane { font-size:20px; }
body.efs-21 .input-pane { font-size:21px; }
body.efs-22 .input-pane { font-size:22px; }
body.ofs-11 .output-pane { font-size:11px; }
body.ofs-12 .output-pane { font-size:12px; }
body.ofs-13 .output-pane { font-size:13px; }
body.ofs-14 .output-pane { font-size:14px; }
body.ofs-15 .output-pane { font-size:15px; }
body.ofs-16 .output-pane { font-size:16px; }
body.ofs-17 .output-pane { font-size:17px; }
body.ofs-18 .output-pane { font-size:18px; }
body.ofs-19 .output-pane { font-size:19px; }
body.ofs-20 .output-pane { font-size:20px; }
